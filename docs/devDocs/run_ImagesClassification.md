### run_ImagesClassification
Imports raw imaging data acquired with the LabeoTech's optical imaging systems.

##### Description
___
This function reads multi-channel imaging data stored in binary files (`img_xxxx.bin`) as well as any analog signals (`ai_xxxx.bin`) recorded during an imaging session. The signal from each channel is stored separately in a `.dat` file with an associated `.mat` file containing the signal's metadata.   
The function provides options to perform spatial and temporal binning as well as to import analog signals as events.

##### Syntax
___

`outFile = run_ImagesClassification(RawFolder,SaveFolder)`: Imports raw imaging data stored in the folder [RawFolder](#rawfolder---raw-folder-path) and saves the `.dat` files in [SaveFolder](#savefolder---save-folder-path). It returns the list of files ([outFile](#outfile---list-of-channel-files)) containing the classified imaging signals.

`outFile = run_ImagesClassification(RawFolder,SaveFolder,opts)`: Imports raw imaging data using optional parameters in the [opts](#opts---optional-parameters) structure.

##### Inputs
___
###### RawFolder - raw folder path
*character vector*   
Full path to the folder containing the raw data generated by the LabeoTech's optical imaging system.

###### SaveFolder - save folder path
*character vector*   
Full path to the folder where the imported channel data `.dat` files will be saved.

###### opts - optional parameters
*structure*   
Structure containing the optional parameters of the function.   
The `opts` structure has the following fields:
- *BinningSpatial* (int) default = `1`: Spatial binning factor. Set 1 for no binning or any **N** integer for a N x N spatial binning (e.g. set `opts.BinningSpatial = 2` to apply a 2 x 2 binning).
- *BinningTemp* (int) default = `1`: Temporal binning factor **through averaging**. Set 1 for no binning or set to any **N** integer for a N frame averaging (e.g. set `opts.BinningTemp = 3` for a 3 frame averaging).
-*b_IgnoreStim* (bool) default = `true`: If **true**, this parameter tells the function to ignore stimulation triggers generated by the imaging system. If **false**, the function will consider the stimulation triggers as events and save the events info to `events.mat` file in the `SaveFolder`. For more detailed information on *events*, click [here](/docs/userDocs/events.md).   

##### Output
___

###### outFile - list of channel files
*cell array of character vectors*   
List of `.dat` files created by `run_ImagesClassification`.   
The file names can be one or more of the following: red.dat, green.dat, yellow.dat, fluo(_475).dat or speckle.dat.

##### Examples
___

###### Import data using default settings
To import raw imaging data keeping the original spatial and temporal resolutions:   
`outFile = run_ImagesClassification('C:\ROOT\RAWFOLDER','C:\ROOT\SAVEFOLDER');`   

For instance, for a recording using the fluorescence, red and yellow channels with a spatial resolution of 512 by 512 pixels at 30Hz, one will obtain the files:   
*fluo.dat*, *red.dat* and *yellow.dat* containing frames with 512 by 512 pixels at a frequency of 10 Hz each - total frequency of 30 Hz divided by the number of channels (3).

###### Import data using custom settings
To import raw imaging data using custom optional parameters, first create the `opts` structure with the fields *BinningSpatial*, *BinningTemp* and *b_IgnoreStim* with their respective custom values:   
`opts = struct('BinningSpatial',2,'BinningTemp',1,'b_IgnoreStim,false);`   

Here, we set the optional parameters to apply a spatial binning of 2 x 2, keep original temporal resolution and to keep stimulation triggers generated by the acquisition system.   
Now, the `opts` structure is passed as an input argument to the *run_ImagesClassification* function:   
`outFile = run_ImagesClassification('C:\ROOT\RAWFOLDER','C:\ROOT\SAVEFOLDER',opts);`   

Following the previous example, for the raw data consisting of 3 channels with frame resolution of 512 by 512 pixels at 30Hz, one will obtain the files:   
*fluo.dat*, *red.dat* and *yellow.dat* containing frames with 256 by 256 pixels at a frequency of 10 Hz each and an `events.mat` file containing the triggers information will be saved in the `SaveFolder`.

















[**<< Home**](/index.md)
