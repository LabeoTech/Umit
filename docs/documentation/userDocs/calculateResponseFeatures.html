<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../css/master.css">
    <style media="screen">
              ul {
            line-height: 1.5;
        }

        .collapsible {
            background-color: #eeeeee;
            color: black;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
            margin-bottom: 10px;
        }

        .active,
        .collapsible:hover {
            background-color: #888;
        }

        .content {
            padding: 0 18px;
            display: none;
            overflow: hidden;
            background-color: #fff;
            border: 1px solid black;
            margin-bottom: 10px;
        }
    </style>
    <title>calculateResponseFeatures</title>
</head>

<body>
    <h2>calculateResponseFeatures</h2>
    <hr>
    <p>
        Calculates the amplitude and latencies from ROI event-triggered data.
    </p>
    <h3 id="description">Description</h3>
    <hr>
    <p>
        This function calculates the following features from the responses to events:
    </p>
    <ul>
        <li>Peak amplitude</li>
        <li>Peak latency</li>         
        <li>Onset amplitude</li>
        <li>Onset latency</li>
        <li>Area under the curve (AUC) amplitude</li>
    </ul>    
    <p>
        The response peak is the maximum - or minimum if the response polarity is negative - in the time window post-event set in the parameters. The onset value is the point where the signal crosses the threshold, set in the parameters as a multiple of the standard deviation of the signal in the pre-event time.
    </p>
    <p>
        The peak and onset amplitudes are calculated as their values minus the average of the pre-event period. The latencies are calculated as the time delay of the Peak response from the event onset time in seconds.
    </p>
    <p>
        The AUC amplitude is calculated as the AUC in the post-event time window minus the AUC in the pre-event period.
    </p>    
    <h3>Input</h3>
    <hr>
    <p>
        This function accepts data from a <small>.mat</small> file created using the function <i>getDataFromROI</i> with the temporal signal split by event (with dimensions 'O', 'E', 'T').
    </p>
    <h3>Output</h3>
    <hr>
    <p>
        The output of this function is a <samp>.mat</samp> file containing the response features stated in the description.
    </p>
    <p>
        For additional details on the data structure of the output file, please click <a href="./mat-files-organization.html">here</a>.
    </p>
    <h3 id="parameters">Parameters</h3>
    <hr>
    <button title="click to expand" type="button" class="collapsible">
        <span class="iconplus"></span>
        <samp><b>STD_threshold</b></samp> - response threshold<br>
        <span class="title-desc"><i> 1 (default) | positive number </i></span>
    </button>
    <div class="content">
        <p>
            Multiplication factor for the standard deviation of the pre-event period. This value is used as a threshold to calculate the response onset parameter. 
            If the responses do not cross this threshold, the onset data will return as <samp>NaN</samp>.
        </p>
    </div>
    <button title="click to expand" type="button" class="collapsible">
        <span class="iconplus"></span>
        <samp><b>ResponsePolarity</b></samp> - response polarity<br>
        <span class="title-desc"><i> positive (default) | negative </i></span>
    </button>
    <div class="content">
        <p>
            Polarity of the response. It is worth noting that bipolar responses (with positive and negative elements) are not covered by this function.
        </p>
    </div>
    <button title="click to expand" type="button" class="collapsible">
        <span class="iconplus"></span>
        <samp><b>TimeWindow_sec</b></samp> - post-event time window<br>
        <span class="title-desc"><i> 'all' (default)| pair of positive numbers </i></span>
    </button>
    <div class="content">
        <p>
            Time window in which the response features (peak, onset and AUC) will be calculated. If set to "all" (default), all period post-event onset will be used. Otherwise, provide a pair of values separated by a semicolon representing the start and end of the time period from the event ontset. For instance, if you want to calculate the response in a time window of 2 seconds but ignore the first 0.5 seconds of the response, the TimeWindow_sec value is set as <span class = code-inline> 0.5;2.5</span>.
        </p>
    </div>
    <!-- JavaScript code to collapse sections -->
    <script src="collapsible_behaviour.js"></script>
    <hr>
</body>
</html>
